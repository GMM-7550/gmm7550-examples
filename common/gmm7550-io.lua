-- Signal mapping between GateMate FPGA
-- and GMM-7550 module IO connectors

local io1_pins = {
   3,  5,  9, 11, 15, 17, 21, 23, 27,
  29,  4,  6, 10, 12, 16, 18, 22, 24,
}

local io2_pins = {
  37, 39, 43, 45, 49, 51, 55, 57, 28,
  30, 38, 40, 44, 46, 50, 52, 56, 58
}

local gnd_pins = {
   1,  2,  7,  8, 13, 14, 19, 20, 25,
  26, 41, 42, 47, 48, 53, 54, 59, 60
}

local function P(io, io1, io2)
  io1 = io1 or "xa"
  io2 = io2 or "xb"
  local gnd = "   GND  "
  local vcc = "VCC25   "
  local vio = "VIO_"
  vio1 = vio .. io1 .. "  "
  vio2 = vio .. io2 .. "  "

  local p = {
    [31] = vio1,
    [32] = vio1,
    [33] = vcc,
    [34] = vcc,
    [35] = vio2,
    [36] = vio2,
  }

  for _,i in pairs(gnd_pins) do
    p[i] = gnd
  end

  for _,i in pairs(io1_pins) do
    if io[i] then
      p[i] = "IO_" .. io1 .. "_" .. io[i]
    end
  end

  for _,i in pairs(io2_pins) do
    if io[i] then
      p[i] = "IO_" .. io2 .. "_" .. io[i]
    end
  end

  return p
end

P1 = P({
         [ 3] = "B1", [ 5] = "A1",
         [ 4] = "B0", [ 6] = "A0",
         [ 9] = "B2", [11] = "A2",
         [10] = "B3", [12] = "A3",
         [15] = "B4", [17] = "A4",
         [16] = "B5", [18] = "A5",
         [21] = "B6", [23] = "A6",
         [22] = "B7", [24] = "A7",
         [27] = "B8", [29] = "A8",
         [28] = "B0", [30] = "A0",

         [37] = "B1", [39] = "A1",
         [38] = "B3", [40] = "A3",
         [43] = "B2", [45] = "A2",
         [44] = "B5", [46] = "A5",
         [49] = "B4", [51] = "A4",
         [50] = "B8", [52] = "A8",
         [55] = "B6", [57] = "A6",
         [56] = "B7", [58] = "A7",
       }, "WB", "WC")

P2 = P({
         [ 3] = "B2", [ 5] = "A2",
         [ 4] = "B0", [ 6] = "A0",
         [ 9] = "B3", [11] = "A3",
         [10] = "B1", [12] = "A1",
         [15] = "B5", [17] = "A5",
         [16] = "B4", [18] = "A4",
         [21] = "B6", [23] = "A6",
         [22] = "B7", [24] = "A7",
         [27] = "B8", [29] = "A8",
         [28] = "B0", [30] = "A0",

         [37] = "B1", [39] = "A1",
         [38] = "B2", [40] = "A2",
         [43] = "B3", [45] = "A3",
         [44] = "B4", [46] = "A4",
         [49] = "B5", [51] = "A5",
         [50] = "B7", [52] = "A7",
         [55] = "B6", [57] = "A6",
         [56] = "B8", [58] = "A8",
       }, "NA", "NB")

P3 = P({
         [ 3] = "B7", [ 5] = "A7",
         [ 4] = "B8", [ 6] = "A8",
         [ 9] = "B5", [11] = "A5",
         [10] = "B4", [12] = "A4",
         [15] = "B6", [17] = "A6",
         [16] = "B2", [18] = "A2",
         [21] = "B3", [23] = "A3",
         [22] = "B0", [24] = "A0",
         [27] = "B1", [29] = "A1",
         [28] = "B7", [30] = "A7",

         [37] = "B8", [39] = "A8",
         [38] = "B4", [40] = "A4",
         [43] = "B6", [45] = "A6",
         [44] = "B2", [46] = "A2",
         [49] = "B5", [51] = "A5",
         [50] = "B1", [52] = "A1",
         [55] = "B3", [57] = "A3",
         [56] = "B0", [58] = "A0",
       }, "EB", "EA")

P4 = P({
         [ 3] = "B8", [ 5] = "A8", -- CLK0
         [ 4] = "B3", [ 6] = "A3",
         [ 9] = "B6", [11] = "A6", -- CLK2
         [10] = "B2", [12] = "A2",
         [15] = "B5", [17] = "A5", -- CLK3
         [16] = "B1", [18] = "A1",
         [21] = "B7", [23] = "A7", -- CLK1
         [22] = "B0", [24] = "A0",
         [27] = "B4", [29] = "A4",
         [28] = "B8", [30] = "A8",

         [37] = "B6", [39] = "A6",
         [38] = "B7", [40] = "A7",
         [43] = "B4", [45] = "A4",
         [44] = "B5", [46] = "A5",
         [49] = "B2", [51] = "A2",
         [50] = "B3", [52] = "A3",
         [55] = "B1", [57] = "A1",
         [56] = "B0", [58] = "A0",
       }, "SB", "SA")

function print_pinout(p)
  for i=1,59,2 do
    print(p[i] or "   ---  ", i, i+1, p[i+1] or "   ---  ")
  end
end

-- print("-- P1 --")
-- print_pinout(P1)
-- 
-- print("-- P2 --")
-- print_pinout(P2)
-- 
-- print("-- P3 --")
-- print_pinout(P3)
-- 
-- print("-- P4 --")
-- print_pinout(P4)
 
return {
  P1, P2, P3, P4,
  west = P1, north = P2, east = P3, south = P4,
}
